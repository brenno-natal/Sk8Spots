<div class="modal fade" tabindex="-1" role="dialog" id="Spot">
    <div class="modal-dialog">
        
            <div class="modal-header">

                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h2 class="modal-title" id="spotName"></h2>
            </div>
            <div class="modal-body">
                <!--<p class="text-center"><img id="spotImage" /></p>-->
                
                      <a href="#" class="thumbnail">
                        <img id="spotImage">
                      </a>
                   

                <p>
                    <i class="fa fa-map-marker" aria-hidden="true" style="font-size: 28px;"></i>
                    <span id="spotAddress"></span>
                </p>


                <div class="faci">
                    <h3><i class="fa fa-check-square-o" aria-hidden="true"></i> Facilities:</h3>
                    <ul id="facilities"></ul>
                </div>
            </div>
            <div class="modal-footer">


                <button type="button" class="btn btn-default" onclick="deleteSpot()">Delete Spot</button>
            </div>
    </div>
</div>


<script type="text/javascript">

    var localClicado = null;

    function deleteSpot() {

        // $.ajax(...) localClicado.id

        $.ajax({
            url: "api/local/excluir?id=" + encodeURIComponent(localClicado.id),
            method: "get",

            success: function (dadosDeRetorno) {
                fecharSpot();
                //dadosDeRetorno.remove().draw();
                alert("Exclu√≠do com sucesso!");
                //location.reload();
                locais.splice(localClicado.indice, 1);

                map.removeLayer(localClicado.marker);
                for (var i = localClicado.indice; i < locais.length; i++) {
                    locais[i].indice--;
                }
            },
            error: function () {
                alert("Erro!");
                //console.log(localClicado.nome);
            }
        });


    }

    function abrirSpot() {
        fecharCadastro();
        ocultarMenuLateral();
        fecharNovospot();
        document.getElementById("Spot").style.top = "13%";
    }

    function fecharSpot() {
        //document.getElementById("Spot").style.top = "";
        var modalSpot = document.getElementById("Spot");
        $(modalSpot).modal("hide");
    }


    function onMarkerClick() {
        var local = this.local;
        localClicado = local;

        var modalSpot = document.getElementById("Spot");

        var spotName = document.getElementById("spotName");
        spotName.textContent = local.nome;

        var spotImage = document.getElementById("spotImage");
        spotImage.src = "/locais/" + local.id + ".jpg";

        var spotAddress = document.getElementById("spotAddress");
        spotAddress.textContent = "Address: " + local.endereco + " - " + local.bairro;

        var item;
        var list = document.getElementById("facilities");

        while (list.firstChild)
            list.removeChild(list.firstChild);

        var facilities = local.nometipos.split(",");
        //console.log("facilities: ", facilities);
        //console.log("Nomes:  ", local.nometipos);
        for (var i = 0; i < facilities.length; i++) {
            facilities[i].textContent = local.nometipos;
            item = document.createElement("li");
            item.innerHTML = facilities[i];
            list.appendChild(item);
        }


        $(modalSpot).modal({
            backdrop: "static",
            keyboard: true
        });
    }


</script>